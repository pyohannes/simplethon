\begin{tikzpicture}[node distance=.5cm, start chain=going below]

    \node (sthsource)   [doc]     {.sth};
    \node (parse)       [action]  {parse};
    \node (simplify)    [action]  {simplify};
    \node (typify)      [action]  {typify};
    \node (prepare)     [action]  {prepare};
    \node (translate)   [action]  {translate};
    \node (write)       [action]  {write};
    \node (csource)     [doc]     {.c};

    \draw[->] (sthsource) -- (parse);
    \draw[->]     (parse) -- (simplify);
    \draw[->]  (simplify) -- (typify);
    \draw[->]    (typify) -- (prepare);
    \draw[->]   (prepare) -- (translate);
    \draw[->] (translate) -- (write);
    \draw[->]     (write) -- (csource);

    \draw[tuborg, decoration={brace}] let \p1=(parse.north), \p2=(simplify.south) in
        ($(2, \y1 - 2)$) -- ($(2, \y2 + 2)$) node[tubnode] {lexical and syntactic analysis} ;

    \draw[tuborg, decoration={brace}] let \p1=(typify.north), \p2=(typify.south) in
        ($(2, \y1 - 2)$) -- ($(2, \y2 + 2)$) node[tubnode] {semantic analysis} ;

    \draw[tuborg, decoration={brace}] let \p1=(prepare.north), \p2=(write.south) in
        ($(2, \y1 - 2)$) -- ($(2, \y2 + 2)$) node[tubnode] {code generation} ;

\end{tikzpicture}
